<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>ECE 3400: Physical Intelligent Systems by cz236</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Lab 2</h1>
      <h2 class="project-tagline">Phototransistors & Display</h2>
      <a href="https://github.coecis.cornell.edu/cz236/cz236.github.io" class="btn">View on GitHub</a>
      <a href="https://pages.github.coecis.cornell.edu/cz236/cz236.github.io" class="btn">Home</a>
      <a href="https://pages.github.coecis.cornell.edu/cz236/cz236.github.io/Lab1" class="btn">Lab 1</a>
      <a href="https://pages.github.coecis.cornell.edu/cz236/cz236.github.io/Lab3" class="btn">Lab 3</a>
      <a href="https://pages.github.coecis.cornell.edu/cz236/cz236.github.io/Lab4" class="btn">Lab 4</a>
    </section>

    <section class="main-content">
      <h2>
<a id="Objectives" class="anchor" href="#Objectives" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Objectives:</h2>
      <h3>
      <a id="For part 1" class="anchor" href="#For part 1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>For part 1:</h3>
<ul>
<li>Build a simple IR light detection circuit with phototransistor.</li>
<li>Build a simple IR light emitting circuit using the signal generator on a separate breadboard.</li>
<li>Test the IR detection circuit with the oscilloscope.</li>
<li>Test and characterize your IR detection circuit with the Nano.</li>
<li>Build the other two IR light detection circuits on your robot’s breadboard.</li>
</ul>
      <h3>
      <a id="For part 2" class="anchor" href="#For part 2" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>For part 2:</h3>
<ul>
<li>Build the display component of the base station on a separate breadboard.</li>
<li>Test the display base station circuitry.</li>
</ul>

<h2>
<a id="Materials" class="anchor" href="#Materials" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Materials:</h2>
    <h3>
    <a id="For part 1" class="anchor" href="#For part 1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>For part 1:</h3>
<ul>
<li>Robot</li>
<li>Long breadboard</li>
<li>Signal generator</li>
<li>Oscilloscope</li>
<li>Caster wheel</li>
<li>3 x Phototransistors (side view #LTR‐301, or top view # 1540031NC6090)</li>
<li>3 x 2.2kΩ resistor</li>
<li>IR LED + resistor</li>
<li>wires</li>
</ul>
    <h3>
    <a id="For part 2" class="anchor" href="#For part 2" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>For part 2:</h3>
<ul>
<li>Arduino Nano Every & micro USB cable</li>
<li>Long breadboard</li>
<li>One 4‐digit 7-segment display (TDCG1050M Green, or TDCR1050M Red)</li>
<li>4 x PNP transistors (2N3906)</li>
<li>SN74HC595N shift register</li>
<li>8 x 330Ω resistors (for the shift register)</li>
<li>4 x 4.6kΩ resistors (for use with the transistors)</li>
<li>wires</li>
</ul>

      <h2>
<a id="Procedure" class="anchor" href="#Procedure" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Procedure:</h2>
      <h3>
<a id="Part 1" class="anchor" href="#Part 1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Part 1: LIGHT DETECTION AND FREQUENCY MEASUREMENT</h3>
      <h4>
<a id="1." class="anchor" href="#1." aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1. Build IR Detection Circuit on the Robot</h4>
      <p>In order for our robot to navigate through a maze and find a number of treasures which consist of infrared (IR) LEDs positioned randomly in the maze, we need enable it to detect IR light in three directions as it moves forward.</p>
      <p>To build an IR detection circuit on our robot, we followed the graph below, where the 2.2kΩ resistor acts to pull down the voltage.</p>
      <img src="images/lab2a.jpg" alt="IR detection circuit" width="600" height="300">
      
      
      <h4>
<a id="2." class="anchor" href="#2." aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>2. Build IR Emitting Circuit</h4>  
      <p> To measure a blinking IR signal, we then built a blinking LED circuit that will act as a treasure by connecting the LED in series with a resistor. For resistance, we choosed 60Ω so that with a voltage of 1.2V the current flowing through the LED will be 20 mA .</p>
      <p> We then used the signal generator as power source for our LED, which generate a sinusoidal waveform with 1kHz frequency and 1.2V peak-to-peak voltage.</p>

      <h4>
<a id="3." class="anchor" href="#3." aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>3. Test the Generated Signal </h4>  
      <p> To confirm that the signal generator is indeed generating a sinusoidal waveform with a frequency of 1kHz and a peak‐to‐peak voltage of 1.2V, we used the oscilloscope by connecting its red wire to where we connected the red wire from the signal generator, and connecting the black wire from the oscilloscope to the black wire from the signal generator.</p>
      <p> The figure below shows the trace for the 1kHz signal.</p>
      <img src="images/lab2b.jpg" alt="Test the Generated Signal" width="600" height="300">
      <p> Note that we set the signal generator to output a 1.2V peak‐to‐peak signal, but the oscilloscope is reading a max voltage more than 2V. The reason is that there is an impedance mismatch between the signal generator’s and the oscilloscope’s. But it doesn’t matter so much for us, because we are interested in the frequency.</p>
      
      
      <h4>
<a id="4." class="anchor" href="#4." aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>4. Test the Phototransistor Circuit</h4>
      <p> Now we can play around with our detection circuit and IR emitting circuit. By moving the LED in our IR emitting circuit around the phototransistor, we enabled the phototransistor to detect the signal while we were using the oscilloscope to display the signal it detected (see figure below).</p>
      <img src="images/lab2c.jpg" alt="Test the Phototransistor" width="500" height="300">

      
       <h4>
<a id="5." class="anchor" href="#5." aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>5. Measure Signal's frequency with Nano</h4>
      <p> For this part,  we used the peripheral Analog Comparator (AC) along with TCB that are integrated within the ATMega4809 microcontroller to measure the frequency of the IR signal.</p>
      <p> We first disconnected the oscilloscope’s probes from our circuit and then connected the output of our detection circuit to an analog pin of Nano.</p>
      <img src="images/lab2g.jpg" alt="Measure Signal's frequency with Nano" width="450" height="600">
      
      <p> The measured frequencies are displayed by the Serial Monitor:</p>
      <img src="images/lab2d.jpg" alt="Serial Monitor" width="600" height="350">
      
      
      <h3>
<a id="Part 2" class="anchor" href="#Part 2" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Part 2: 4‐DIGIT 7‐SEGMENT DISPLAY</h3>
      <p> For the second part of the lab, we deals with building the display component of the base station on a separate breadboard, which consist of a Nano, 4‐digit 7‐segment display, transistors, resistors, as well as a shift register to reduce the number of pins that will be used on the Nano.</p>
      <p> The Schematic for connectivity is shown below:</p>
      <img src="images/lab2e.png" alt="Schematic" width="600" height="600">
      
      <p> After finishing building the circuit, we uploaded the code to the Aruino to see whether the 7-segment display correctly display the numbers we set in the loop() function of our code.</p>
      <p> The figure below shows our 7-segment board displaying the number 2468:</p>
      <img src="images/lab2f.jpg" alt="display2468" width="450" height="600">
      
      
      
<footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.coecis.cornell.edu/cz236/cz236.github.io">ECE 3400: Physical Intelligent Systems</a> is maintained by <a href="https://github.coecis.cornell.edu/cz236">cz236</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>      
